<!doctype html>
<html class="theme-next use-motion theme-next-mist">
<head><meta name="generator" content="Hexo 3.8.0">
  

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">






  <link rel="stylesheet" type="text/css" href="../../vendors/fancybox/source/jquery.fancybox.css?v=2.1.5">


<link rel="stylesheet" type="text/css" href="../../css/main.css?v=0.4.2">


    <meta name="description" content="在码农炼成之路不断挣扎……stay hungry……keep learning……">



  <meta name="keywords" content="java,android,life,CharlesXiao">





  <link rel="shorticon icon" type="image/x-icon" href="../../favicon.ico?v=0.4.2">



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?6749450";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  <title> CharlesXiao‘s Blog </title>
</head>

<body>
<!--[if lte IE 8]> <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'> <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode"><img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari." style='margin-left:auto;margin-right:auto;display: block;'/></a></div> <![endif]-->
  <div class="container one-column 
  
">
    <div class="headband"></div>
    <!-- fork me github icon  -->
    <a href="https://github.com/Charles-Xiao" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <a href="/" class="brand">
      <span class="logo">
        <i class="icon-logo"></i>
      </span>
      <span class="site-title">CharlesXiao‘s Blog</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>


  <ul id="menu" class="menu">
     
    <!--增加swiftype搜索功能-->
    <form class="menu-item menu-item-search">
      <input type="text" id="st-search-input" class="st-search-input st-default-search-input">
    </form>
    
    <script type="text/javascript">
      (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
      (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
      e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
      })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

      _st('install','yxUhPQ2aHyszT_1btxX9','2.0.0');
    </script>
    <!--增加swiftype搜索功能end-->
    
    
      
      <li class="menu-item menu-item-home">
        <a href="/">
          <i class="menu-item-icon icon-home"></i> <br>
          首页
        </a>
      </li>
    
      
      <li class="menu-item menu-item-categories">
        <a href="/categories">
          <i class="menu-item-icon icon-categories"></i> <br>
          分类
        </a>
      </li>
    
      
      <li class="menu-item menu-item-about">
        <a href="/about">
          <i class="menu-item-icon icon-about"></i> <br>
          关于
        </a>
      </li>
    
      
      <li class="menu-item menu-item-archives">
        <a href="/archives">
          <i class="menu-item-icon icon-archives"></i> <br>
          归档
        </a>
      </li>
    
      
      <li class="menu-item menu-item-tags">
        <a href="/tags">
          <i class="menu-item-icon icon-tags"></i> <br>
          标签
        </a>
      </li>
    
  </ul>


      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <div id="posts" class="posts-expand">
    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              从菊与刀初探日本文化
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2017-01-14
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="../../categories/读书札记/">读书札记</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="../../2017/01/15/从菊与刀初探日本文化/#comments">
              <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/15/从菊与刀初探日本文化/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>说到日本文化，我其实是不太感兴趣的，应该说是因为从小到大接触的少，如果接触得多说不定也会很感兴趣；然而身边有些朋友对日本文化表现出了很深的兴趣，不管是漫画还是电影还是其他。可以说，在我这一代人里边应该是有不少人收到日本文化影响的，包括大部分二次元的东西应该都是起源于日本。我想，日本文化是必有其过人之处的，否则不太可能有这么的输出力。抱着了解的心态，我从亚马逊下单了《菊与刀》，趁着每日睡前读完了它，一探日本文化。<a id="more"></a></p>
<p>《菊与刀》是美国文化人类学家Ruth Benidict于1946年出版的一本研究日本文化的著作，受委托于美国政府，写于二战末期，该书的研究成果一定程度上是为了帮助美国深入了解日本人的天性以便于赢得战争，也确实在战胜日本和日本的战后治理重建上提供了参考资料；作者不止从一个西方的人类学学者的角度深入地阐述了日本人的双重性格特征，也从日本人身上做了大量调研和探访，从而能更好地阐述日本文化；该书被誉为“现代日本学的鼻祖”，想了解日本文化的话，推荐一读。  </p>
<p>读完《菊与刀》，那么对于很多你曾经看到的关于日本人的描述或者信息中觉得不可思议的地方，你就会突然觉得原来并不是不可思议，因为你觉得不可思议的地方可能其实很日本，和他们的文化其实是很吻合的。比如我前几天去看《罗曼蒂克消亡史》，影片快结束时，美军战俘营里，美军看着战败的日本战俘，有这样一段台词：“我无法理解这些黄皮猴子，前一天他们还在为玉碎冲锋陷阵，而现在却心甘情愿地在为我们修战俘营”。日本人为什么可以转变的这么快？是因为他们天性没有骨气？顺风转舵？都不是，读了菊与刀你就会发现，这种行为是和他们的传统文化，一种他们视为崇高的传统文化息息相关的。  </p>
<blockquote class="blockquote-center">日本人的菊与刀般的双重人格 —- 极度好战又极度温和，极度黩武又极度爱美，极度粗鲁傲慢又极度彬彬有礼，极度死板又极度灵活，极度恭顺又极度讨厌被使唤，极度忠诚又极度背叛，极度勇敢又极度胆小，极度保守又极度喜欢新事物</blockquote>

<h3 id="战争中的日本人">战争中的日本人</h3><p>说到二战，对于日本的法西斯行径，绝大多数中国人除了对于日本人灭绝人性的侵略行为的憎恨之外，还有着些不可思议，他们怎么可以赤裸裸地提出什么“大东亚共荣圈”这种理论，怎么可以认为自身这种侵略行为是正义的，从而义无反顾地去实施，狂热地杀戮他人，日本人是变态么？没有人性的么？很多人到现在为止也是这么认为的。然而实际情况是怎么样的呢？日本人是怎么为自己发动的这场侵略战争做合理性辩护的呢？  </p>
<p>日本是一个从上到下等级分明的国度，不管是社会还是家庭中，都是等级分明的，所以他们非常推崇的一点叫做“各就其位”。他们希望建立一个统一的国际等级体系，各个国家都在其中找到各自对应的位置，这样整个国际社会就能像日本社会一样通过等级实现和平与统一；当然，他们理所当然地认为日本人是在这个等级体系的金字塔顶端的，这在我们看来当然是非常可笑的。也正因为这种等级文化，日本人在发动侵略时觉得自己在帮助落后的中国，甚至于亚洲，是为了整个大东亚的未来着想的。  </p>
<p>日本人在战争期间表现出来的狂热好战以及偏激行为同样让外人感到吃惊，他们在战争中做飞机自杀式袭击，一言不合就剖腹谢罪，对自己的同胞伤损弃之。他们这些行为的一个信念上的支持是来源于对天皇的无限忠诚，这也是他们的文化之一，他们认为天皇无可指摘，狂热好战和自杀式袭击都是效忠的一种表现形式，无限光荣。只要天皇一声令下，日本人可以举着竹竿奋战至死，也可以心平气和地接受天皇宣布战败和日本本土沦陷，这也能解释了罗曼蒂克消亡史里边的日本战俘为何变化如此之快了，冲锋陷阵还是接受战败，都是效忠天皇的表现。还有值得提到的一点是，战争中的日本人接受着“精神克服物质条件”的信条洗脑，认为精神可以战胜生理死亡，这在我们看来是如此荒谬，然而这却是他们认为自己不可战胜，可以打败人数和装备都比自己精良的美军的心理基础；他们甚至于认为在战场上是在展示“日本精神”，他们的海员被告知，万一军舰被击中而不得不弃船时，请记得依然要保持端庄优雅的姿态来操纵救生艇，这种日本文化中对于自身形象的关注一样带到了战场上，形象大于生命，忠诚大于人性，从而造就了各种各样的外人觉得不可思议的行为。  </p>
<h3 id="各就其位">各就其位</h3><p>日本人对于秩序等级的依赖就像美国人对于平等自由的信仰，“各就其位”理念是一种深植于日本社会经验的人生准则，遵循等级制度对于他们而言就像呼吸一样自然；各就其位体现在阶层，辈分，性别，年龄等各个方面，从皇室到世袭贵族，再到士农工商，贱民，阶层之间横着无法逾越的鸿沟。即使到了明治维新后期，政治家们也依然没有过终止等级制度的想法，即使阶层之间在不断地渗透，例如武士和商人之间往往通过通婚的方式进行名利交换。这样直到二战，日本人习惯于等级制，却不知道等级制是最无法出口的商品，其他国家都对日本的狂妄主张(大东亚共荣)很愤慨，而日本人却并不自知。</p>
<h3 id="义理与人情">义理与人情</h3><h4 id="义理">义理</h4><p>在日本社会里，义理有两种不同的类别，一种是对社会的义理，也就是报恩的义务，是一种回报仁慈的责任；另一种是对名声的义理，是捍卫自身名誉的义务，包括不惜一切代价的复仇；对于日本人而言，恩是一种最重要的，永久存在的债务，报恩是一种积极的，箭在弦上的迫切行为；日本人的一生都在追求荣誉，他人的尊重，污名是不能接受的，侮辱也是不能接受的；洗刷他人对自己的侮辱是每个日本人愿意付出努力的事情</p>
<h4 id="人情">人情</h4><p>这里的人情是指“人之情欲、感官享受”，在日本这样一个讲究义理规范与自我克制的国度，或许大家会以为他们会把“人情”视作罪恶一般尽力将其从内心剔除，崇尚苦行僧般的佛教徒的清心寡欲生活。然而并不是。日本人并不谴责自我满足，他们认为肉体享乐是好事，只要不影响到生活中的重要事宜就行。  </p>
<p>日本人从小除了培养伦理规范之外，也培养肉体的享乐能力，他们视肉体享乐为一门艺术；他们在享受肉体的乐趣的同时，又会为履行义务而去牺牲享乐。  </p>
<p>例如，日本人极为享受泡热水澡，被他们视为一种肉体小享受。他们会在家庭的院子里准备好泡澡水，家人们按照严格的长幼次序轮流入浴，出浴时浑身被泡成了龙虾般的红色，然后全家人聚在一起享受晚餐; 他们也热衷于“锻炼”，他们会在黎明之前出门，坐在刺骨的山泉瀑布下面，或者在冬夜里往身上倒凉水，他们称之为“冬炼”或者“冷水苦行”。吃喝、睡觉、取暖同样也是日本人的享乐之一，说到睡觉，有个有意思的地方，在日本人眼里，睡觉是一种肉体的享乐，所以他并不是必须或者理所当然的，他们甚至认为睡眠和恢复体力、休息没有什么关系；所以，一个准备考试的学生可以夜以继日地复习，却不想想多睡一会儿能让他更有精力以获取更好的成绩；在军队训练中，睡眠是随时可以为训练牺牲的。日本人的观念里同样不觉得吃和身体能量之间存在必然关系，所以，战时的东京电台会广播告诉防空洞中的避难者，做广播体操可以让饥肠辘辘的人们强壮起来，恢复体力，显然，用现代科学的理念来看，这是相当可笑的。  </p>
<p>浪漫爱情和性欲享受同样是日本人培养的人情，日本的小说中就充满了各种爱情故事，日本的艺妓文化就是对于性欲享受的一种体现，他们把属于妻子与婚姻的范畴和属于性欲肉体享受的范围区别的很清楚，一个是义务，一个是消遣。</p>
<h3 id="自我约束">自我约束</h3><p>日本人的一生就像一个平坦的大U型，给予两头的幼儿和老人最大限度的宠爱和自由，一个日本人长大的过程就是一个各种限制逐渐增加的过程，壮年进入U型的底部，直到六十岁之后，又回归到幼儿一般的不被羞耻感所左右的状态。这其实是与其他常态相反的，正常来说，一个人到达壮年，随着经济，人格的独立，自我意识的苏醒，应该进入自由和主动权的最高点，然而日本人却相反；所以其实一个成年的日本人是紧张与压抑的，为了避免非议，他们需要放弃刚刚懂得享受的个人乐趣和情感冲动，去做一个符合期望的人。为什么要这么压抑自己的本性呢？因为他们相信约束是一种精神锻炼，可以带来自由所不能带来的效果，一个成年人需要具备这种优秀的能力；日本人把身体比作刀，这种锻炼是一种自我负责，一种对“身体锈迹”的负责，使易生锈的内心之刀远离锈迹成为一个日本人贯穿中年的追求。</p>
<h3 id="投降后的日本人/历史的亏欠者">投降后的日本人/历史的亏欠者</h3><p>战后的日本人通过承认侵略战争是一个错误且失败的方针，迈出了社会变革的第一步，他们希望在和平的国家中赢回受尊重的地位。日本的动机是应势变化的，如果情况允许的话，它会在和平的世界中寻求自己的位置，否则，它也可能成为武装阵营的一员。  </p>
<p>当下的日本军国主义犹同熄灭的火焰，他们会关注军国主义在其他国家中是否一样失败，如果没有失败，它会重燃自己的好战激情；如果失败了，日本人就证明它吸取了一条深刻的教训：军国主义的扩张绝对不是一条通往荣誉的坦途。</p>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="../../tags/菊与刀/"> <i class="fa fa-tag"></i> 菊与刀 </a>
          
            <a href="../../tags/日本/"> <i class="fa fa-tag"></i> 日本 </a>
          
        </div>
      

      

      
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Ruby入门基础知识集锦
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2016-12-28
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="../../categories/Ruby/">Ruby</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="../../2016/12/28/Ruby入门基础知识集锦/#comments">
              <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/28/Ruby入门基础知识集锦/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>Ruby是一种纯粹的面向对象编程语言, 类似于 Python 和 Perl 等服务器端脚本语言; 既可以用来编写通用网关接口（CGI）脚本，也可以被嵌入到超文本标记语言（HTML), 语法简单，快速上手，是个人开发者的利器;再加上Ruby on Rails 开发框架，也是一枚轻量级web开发的利器。本文主要包括部分ruby基础语法和部分易淆点。</p>
<h3 id="变量/常量">变量/常量</h3><ul>
<li>一般小写字母、下划线开头：变量（Variable）</li>
<li>$开头：全局变量（Global variable）;未初始化的全局变量的值为 nil，在使用 -w 选项后，会产生警告</li>
<li>@开头：实例变量（Instance variable）</li>
<li>@@开头：类变量（Class variable）类变量被共享在整个继承链中</li>
<li>大写字母开头：常数（Constant）,类名称,模块名称</li>
<li></li>
</ul>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="../../tags/Ruby/"> <i class="fa fa-tag"></i> Ruby </a>
          
        </div>
      

      

      
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Mac安装配置mySQL/mongodb/Redis开发环境及开机自启动
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2016-12-23
        </span>

        
          <span class="post-category">
            &nbsp; | &nbsp; 分类于
            
              <a href="../../categories/Mac系统/">Mac系统</a>

              
              

            
          </span>
        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="../../2016/12/23/Mac安装配置mySQL:mongodb:Redis开发环境及开机自启动/#comments">
              <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/23/Mac安装配置mySQL:mongodb:Redis开发环境及开机自启动/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>后端开发中免不了和数据库、缓存打交道，最近所参与的项目用到的就包括MySQL、mongodb、Redis，配置相关环境是参与开发的第一步; 本文主要讲述安装配置MySQL、mongodb、Redis的相关命令以及如何在mac中设置开机自启，也会记录一些相关控制台命令。<a id="more"></a></p>
<h4 id="MySQL">MySQL</h4><h5 id="安装命令">安装命令</h5><pre><code><span class="comment">// 执行该命令之前请确认已经安装homebrew</span>
brew install mysql
</code></pre><h5 id="开机自启">开机自启</h5><pre><code><span class="comment">// 创建自启动目录</span>
mkdir -<span class="tag">p</span> ~/Library/LaunchAgents
<span class="comment">// 注意修改本机的mysql安装路径和版本号</span>
cp /usr/local/Cellar/mysql/<span class="number">5.6</span>.<span class="number">17</span>/homebrew<span class="class">.mxcl</span><span class="class">.mysql</span><span class="class">.plist</span> ~/Library/LaunchAgents/
<span class="comment">// 设置自启动</span>
launchctl load -w ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.mysql</span><span class="class">.plist</span>
</code></pre><h5 id="MySQL操作命令">MySQL操作命令</h5><pre><code><span class="comment">// mysql启动</span>
mysql<span class="class">.server</span> start
<span class="comment">// mysql登录</span>
mysql -u root -<span class="tag">p</span>
<span class="comment">// 修改密码</span>
SET PASSWORD FOR <span class="string">'root'</span>@<span class="string">'localhost'</span> = <span class="function"><span class="title">PASSWORD</span><span class="params">(<span class="string">'newpass'</span>)</span></span>
<span class="comment">// 查看版本</span>
status
select version
</code></pre><h5 id="错误处理">错误处理</h5><pre><code><span class="comment">// 错误 </span>
ERROR <span class="number">2002</span> (HY000): Can <span class="literal">not</span> connect <span class="keyword">to</span> <span class="built_in">local</span> MySQL server through socket <span class="string">'/tmp/mysql.sock'</span> (<span class="number">2</span>)
<span class="comment">// 解决方法</span>
unset TMPDIR
mysql_install_db <span class="subst">--</span>verbose <span class="subst">--</span>user<span class="subst">=</span>root <span class="subst">--</span>basedir<span class="subst">=</span><span class="string">"$(brew --prefix mysql)"</span><span class="subst">--</span>datadir<span class="subst">=</span>/usr/<span class="built_in">local</span>/<span class="built_in">var</span>/mysql <span class="subst">--</span>tmpdir<span class="subst">=</span>/tmp
</code></pre><h4 id="Redis">Redis</h4><h5 id="安装命令-1">安装命令</h5><pre><code><span class="comment">// 执行该命令之前请确认已经安装homebrew</span>
brew install Redis
</code></pre><h5 id="开机自启-1">开机自启</h5><pre><code><span class="comment">// 复制plist文件到指定目录</span>
cp /usr/local/Cellar/redis/<span class="number">3.2</span>.<span class="number">6</span>/homebrew<span class="class">.mxcl</span><span class="class">.redis</span><span class="class">.plist</span> ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.redis</span><span class="class">.plist</span>
<span class="comment">// 设置自启动</span>
launchctl load -w ~/Library/LaunchAgents/homebrew<span class="class">.mxcl</span><span class="class">.redis</span><span class="class">.plist</span>
</code></pre><h5 id="启动Redis服务">启动Redis服务</h5><pre><code><span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>redis-server
</code></pre><h4 id="mongodb">mongodb</h4><h5 id="安装命令-2">安装命令</h5><pre><code>brew <span class="keyword">install</span> mongodb
</code></pre><h5 id="启动mongodb">启动mongodb</h5><pre><code>mongod --config <span class="regexp">/usr/</span>local<span class="regexp">/etc/m</span>ongod.conf
</code></pre><h5 id="开机自启(同上)">开机自启(同上)</h5><h4 id="Launchrocket帮助管理Homebrew安装的服务—-打开设置就能管理服务">Launchrocket帮助管理Homebrew安装的服务—-打开设置就能管理服务</h4><pre><code><span class="comment">// 安装命令</span>
brew cask install launchrocket
</code></pre>
      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="../../tags/Mac/"> <i class="fa fa-tag"></i> Mac </a>
          
        </div>
      

      

      
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              Redis基础知识
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2016-12-23
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="../../2016/12/23/Redis基础知识/#comments">
              <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/23/Redis基础知识/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h4 id="Redis事务">Redis事务</h4><ol>
<li>Redis中的事务(transaction)是一组命令的集合。事务同命令一样都是Redis最小的执行单位，一个事务中的命令要么都执行，要么都不执行。但是<strong>Redis只能保证一个client发起的事务中的命令可以连续的执行，而中间不会插入其他client的命令</strong></li>
<li>Redis是单线程来处理所有client的请求的。一般情况下redis在接受到一个client发来的命令后会立即处理并返回处理结果</li>
<li><strong>如果使用事务</strong>：client发出multi命令，进入事务上下文，client后续发出的所有命令都被放到一个队列中，直到redis接收到exec命令，redis开始顺序执行队列中的命令，并将执行结果一起返回给client，该事务结束</li>
</ol>
<h4 id="Redis管道pipeline">Redis管道pipeline</h4><ol>
<li>Redis是一个cs模式的tcp server，使用和http类似的请求响应协议。一个client可以通过一个socket连接发起多个请求命令。每个请求命令发出后client通常会阻塞并等待redis服务处理，redis处理完后请求命令后会将结果通过响应报文返回给client。</li>
<li>除了可以利用mget,mset 之类的单条命令处理多个key的命令外我们还可以利用pipeline的方式从client打包多条命令一起发出，不需要等待单条命令的响应返回，而redis服务端会处理完多条命令后会将多条命令的处理结果打包到一起返回给客户端。当一组命令中每条命令都不依赖于之前命令的执行结果时就可以将这组命令一起通过管道发出。管道通过减少客户端与Redis的通信次数来实现降低往返时延累计值的目的(因为通信延迟往往比较久, 将多个命令打包到一条TCP报文，然后让redis并行处理，然后一次性返回结果)</li>
<li>用pipeline方式打包命令发送，redis必须在处理完所有命令前先缓存起所有命令的处理结果。打包的命令越多，缓存消耗内存也越多。所以并是不是打包的命令越多越好。</li>
</ol>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="../../tags/Redis/"> <i class="fa fa-tag"></i> Redis </a>
          
        </div>
      

      

      
      
    </div>
  </div>


    
      

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              MySQL基础知识
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2016-12-23
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="../../2016/12/23/MySQL基础知识/#comments">
              <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/23/MySQL基础知识/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <h4 id="MySQL函数">MySQL函数</h4><ol>
<li>SQL中操作日期和年月的函数：SELECT DAYOFWEEK(‘2013-12-1’), DAYOFMONTH(‘2013-12-1’), WEEKDAY(‘2013-12-1’),DAYOFYEAR(‘2013-12-1’), DAYNAME(‘2013-12-1’), MONTHNAME(‘2013-12-1’), WEEK(‘2013-12-1’)\G;</li>
<li>字符串操作函数：length(), concat(), concat_ws(), RTRIM(), LTRIM(), RPAD(), LPAD(), LOCATE(), SUBSTRING(), LCASE(), UCASE(), REPEAT();</li>
<li>时间处理函数：HOUR(), MINUTE(), SECOND(); 时间格式处理函数：SELECT DATE_FORMAT(‘2013-12-01 02:02:00’, ‘%h:%i:%S’) AS sample_time</li>
<li>日期算数函数：SELECT DATE_ADD(NOW(), INTERVAL 21 DAY); DATE_SUB(), CURDATE(), CURTIME(), NOW(), UNIX_TIMESTAMP(), FROM_UNIXTIME()</li>
<li>SQL事务处理：BEGIN—-ROLLBACK—-COMMIT</li>
<li><p>PHP与SQL交互：</p>
<pre><code><span class="variable">$mysqli</span> = mysqli_connect(<span class="string">"hostname(localhost)"</span>, <span class="string">"uername"</span>, <span class="string">"password"</span>, <span class="string">"database"</span>);
<span class="variable">$sql</span> = <span class="string">"SQL语句"</span>;
<span class="variable">$res</span> = mysqli_query(<span class="variable">$mysqli</span>, <span class="variable">$sql</span>);<span class="regexp">//</span>执行mysqli_query函数，如果正确执行则返回<span class="keyword">true</span>，否则返回<span class="keyword">false</span>；
可以使用mysqli_error(<span class="variable">$mysqli</span>)输出
mysqli_free_result();<span class="regexp">//</span>在关闭之前释放空间
mysqli_close(<span class="variable">$mysqli</span>)；
mysqli_fetch_array()函数获取每一行记录作为一个数组，使用<span class="keyword">while</span>循环可以遍历一次所有记录
</code></pre></li>
</ol>
<h4 id="MySQL概念">MySQL概念</h4><ol>
<li><strong>主键</strong>—唯一标识一条记录，不能有重复的，不允许为空。一个表的主键只能有一个。用来保证数据完整性</li>
<li><strong>外键</strong>—表的外键是另一表的主键, 外键可以有重复的, 可以是空值。一个表可以有多个外键。用来和其他表建立联系用的</li>
<li><strong>索引</strong>—该字段没有重复值，但可以有一个空值。一个表可以有多个唯一索引。提高查询排序的速度</li>
<li><p>外键取值规则：空值或参照的主键值。</p>
<p> (1)插入非空值时，如果主键表中没有这个值，则不能插入。</p>
<p> (2)更新时，不能改为主键表中没有的值。</p>
<p> (3)删除主键表记录时，你可以在建外键时选定外键记录一起级联删除还是拒绝删除。</p>
<p> (4)更新主键记录时，同样有级联更新和拒绝执行的选择</p>
</li>
</ol>
<h4 id="MySQL常用操作">MySQL常用操作</h4><ol>
<li><p>建立主键:</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> 表名
<span class="keyword">add</span> <span class="keyword">constraint</span> PK_字段名<span class="comment">--"PK"为主键的缩写，字段名为要在其上创建主键的字段名,'PK_字段名'就为约束名</span>
<span class="keyword">primary</span> <span class="keyword">key</span> (字段名) <span class="comment">--字段名同上</span></span>
</code></pre></li>
<li><p>增加唯一约束:</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> 表名
<span class="keyword">add</span> <span class="keyword">constraint</span> UQ_字段名
<span class="keyword">unique</span> (字段名)</span>
</code></pre></li>
<li><p>增加外键约束：</p>
<pre><code><span class="operator"><span class="keyword">alter</span> <span class="keyword">table</span> 表名
<span class="keyword">add</span> <span class="keyword">constraint</span> FK_字段名<span class="comment">--"FK"为外键的缩写</span>
<span class="keyword">foreign</span> <span class="keyword">key</span> (字段名) <span class="keyword">references</span> 关联的表名(关联的字段名) <span class="comment">--注意'关联的表名'和'关联的字段名'</span></span>
</code></pre></li>
<li><p>常见join方式</p>
<ul>
<li>LEFT(OUTER) JOIN</li>
<li>RIGHT(OUTER) JOIN</li>
<li>INNER JOIN</li>
</ul>
</li>
<li>建立索引：ALTER TABLE table_name ADD INDEX index_name(‘name’, ‘age’);</li>
<li>删除索引的2种方法<ul>
<li>DROP INDEX index_name on table_name;</li>
<li>ALTER table table_name drop key index_name; 可以删除被外键约束的索引</li>
</ul>
</li>
<li>select * from mysql.user \G; 查看数据库用户权限</li>
<li>show warnings\G; —- 查看mysql优化过程 </li>
</ol>
<h4 id="MySQL索引的建立规则">MySQL索引的建立规则</h4><ol>
<li>在 where 及 order by 涉及的列上建立索引,避免全表扫描</li>
<li>应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，尤其是is not null会导致全表扫描，如： select id from t where num is null 可以在num上设置默认值0，确保表中num列没有null值，然后这样查询： select id from t where num=0</li>
<li>当索引列有大量数据重复时,也就是选择性极低时，查询可能不会去利用索引，还不如直接全表扫描；如一表中有字段sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用。</li>
<li>索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引；一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有必要。</li>
<li>尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接时会逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了</li>
<li>尽可能的使用 varchar/nvarchar 代替 char/nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些</li>
<li>避免频繁创建和删除临时表，以减少系统表资源的消耗</li>
<li>在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成大量 log ，以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。</li>
<li>如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop table ，这样可以避免系统表的较长时间锁定</li>
<li>应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描</li>
<li>(新版本已经会使用到索引)应尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如： select id from t where num=10 or num=20 可以这样查询： select id from t where num=10 union all select id from t where num=20</li>
<li>in 和 not in 也要慎用，否则会导致全表扫描，如： select id from t where num in(1,2,3) 对于连续的数值，能用 between 就不要用 in 了： select id from t where num between 1 and 3</li>
<li>下面的查询也将导致全表扫描： select id from t where name like ‘%abc%’</li>
<li>如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描： select id from t where num=@num 可以改为强制查询使用索引： select id from t with(index(索引名)) where num=@num</li>
<li>应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如： select id from t where num/2=100 应改为: select id from t where num=100*2</li>
<li><p>应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如： </p>
<pre><code>select <span class="property">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> substring(<span class="property">name</span>,<span class="number">1</span>,<span class="number">3</span>)=’abc’   –<span class="property">name</span>以abc开头的<span class="property">id</span> 
select <span class="property">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> datediff(<span class="property">day</span>,createdate,’<span class="number">2005</span>-<span class="number">11</span>-<span class="number">30</span>′)=<span class="number">0</span>       –‘<span class="number">2005</span>-<span class="number">11</span>-<span class="number">30</span>’生成的<span class="property">id</span> 
应改为: select <span class="property">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> <span class="property">name</span> like ‘abc%’ select <span class="property">id</span> <span class="keyword">from</span> t <span class="keyword">where</span> createdate&gt;=’<span class="number">2005</span>-<span class="number">11</span>-<span class="number">30</span>′ <span class="keyword">and</span> createdate&lt;’<span class="number">2005</span>-<span class="number">12</span>-<span class="number">1</span>′
</code></pre></li>
<li><p>不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引</p>
</li>
<li>很多时候用 exists 代替 in 是一个好的选择： select num from a where num in(select num from b) 用下面的语句替换： select num from a where<br>exists(select 1 from b where num=a.num)</li>
<li>任何地方都不要使用 select <em> from t ，用具体的字段列表代替“</em>”，不要返回用不到的任何字段。</li>
<li>尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写</li>
<li>尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理</li>
<li>尽量避免大事务操作，提高系统并发能力。</li>
<li>最有可能影响SQL性能的是磁盘和网络吞吐量</li>
<li>能够采用存储过程实现的对数据库的操作尽量通过存储过程来实现</li>
<li>不良的SQL往往来自于不恰当的索引设计、不充份的连接条件和不可优化的where子句。在对它们进行适当的优化后，其运行速度有了明显地提高</li>
<li>在不加WHERE限制条件的情况下，COUNT(<em>)与COUNT(COL)基本可以认为是等价的；但是在有WHERE限制条件的情况下，COUNT(</em>)会比COUNT(COL)快非常多；</li>
<li>COUNT(*)通常是对主键进行索引扫描，而COUNT(COL)就不一定了，另外前者是统计表中的所有符合的纪录总数，而后者是计算表中所有符合的COL的纪录数。</li>
<li>两表join时，inner join 和 left join 差不多,都需要优化右表(join字段加索引)，而 right join 需要优化左表</li>
</ol>
<h4 id="MySQL_explain/explain_extended含义">MySQL explain/explain extended含义</h4><ol>
<li><strong>id列</strong>：MySQL Query Optimizer 选定的执行计划中查询的序列号。表示查询中执行 select 子句或操作表的顺序,id值越大优先级越高,越先被执行。id 相同,执行顺序由上至下。</li>
<li><p><strong>select_type 列</strong><br>MySQL 把 SELECT 查询分成简单和复杂两种类型，复杂类型又可以分成三个大类：简单子查询、所谓的衍生表（子查询在 FROM 子句里）和 UNION 。SIMPLE：查询中不包含子查询或者UNION；<br>PRIMARY:子查询上层；<br>SUBQUERY：子查询；<br>DERIVED：在FROM列表中包含子查询， MySQL会递归执行这些子查询，把结果放在临时表里</p>
</li>
<li><p><strong>type 列</strong><br>MySQL 在表里找到所需行的方式。包括（由左至右，由最差到最好）：| All | index | range | ref | eq_ref | const,system | null</p>
<ul>
<li>ALL：全表扫描，MySQL 从头到尾扫描整张表查找行  </li>
<li>index：按索引次序扫描表，就是先读索引，再读实际的行，其实还是全表扫描。主要优点是避免了排序，因为索引是排好序的。  </li>
<li>range：以范围的形式扫描索引</li>
<li>ref：非唯一性索引访问</li>
<li>eq_ref：使用有唯一性索引查找（主键或唯一性索引）；唯一性索引才会出现 eq_ref （非唯一性索引会出现 ref ），因为唯一，所以最多只返回一条记录，找到后无需继续查找，因此比 ref 更快。</li>
<li>const：被称为“常量”，这个词不好理解，不过出现 const 的话就表示发生下面两种情况：在整个查询过程中这个表最多只会有一条匹配的行，比如主键 id=1 就肯定只有一行，只需读取一次表数据便能取得所需的结果，且表数据在分解执行计划时读取。例如：select * from a where id=1\G  ；只有唯一性索引才能保证表中最多只有一条记录，只有这样 type 才有可能为 const 。为 id 加普通索引后， type 变为 ref ，改为加唯一或主键索引后， type 便变为 const 了。  </li>
<li>system：system 是 const 类型的特例，当表只有一行时就会出现 system 。  </li>
<li>NULL：在优化过程中就已得到结果，不用再访问表或索引。例如：select min(a_id) from a\G  </li>
</ul>
</li>
<li><p><strong>key_len 列</strong>：索引字段最大可能使用的长度。</p>
</li>
<li><strong>key 列</strong>：查询过程中实际使用的索引；可以在 SELECT 语句中使用 USE INDEX (indexname)来强制使用一个索引或者用 IGNORE INDEX(indexname)来强制 MYSQL 忽略索引</li>
<li><strong>ref 列</strong>：指出对 key 列所选择的索引的查找方式，常见的值有 const, func, NULL, 具体字段名。当 key 列为 NULL ，即不使用索引时，此值也相应的为 NULL 。</li>
<li><strong>rows 列</strong>：MySQL 估计的需要扫描的行数</li>
<li><p><strong>Extra 列</strong>：</p>
<ul>
<li>Using index: 此查询使用了覆盖索引(Covering Index)，即通过索引就能返回结果，无需访问表  </li>
<li>Using where：表示 MySQL 服务器从存储引擎收到行后再进行“后过滤”（Post-filter）。所谓“后过滤”，就是先读取整行数据，再检查此行是否符合 where 句的条件，符合就留下，不符合便丢弃。因为检查是在读取行后才进行的，所以称为“后过滤”。  </li>
<li>Using temporary：使用到临时表；MySQL 使用临时表来实现 distinct 操作；常见于排序 order by 和分组查询 group by </li>
<li>Using filesort：若查询所需的排序与使用的索引的排序一致，因为索引是已排序的，因此按索引的顺序读取结果返回，否则，在取得结果后，还需要按查询所需的顺序对结果进行排序，这时就会出现 Using filesort  </li>
<li>当 type 为 rang、 ref 或者 index 的时候才有可能利用索引排序，其它，如 ALL ，都无法通过索引排序，此时若有 order by ，如上例，便会出现 Using filesort 。 但是当扫描的行过多时，MySQL 直接改用全表扫描，再 Using filesort ，不再使用索引。也就是说， MySQL 会根据表中的信息及查询来决定使用任种方式。</li>
<li>Select tables optimized away：这个值意味着仅通过使用索引，优化器可能仅从聚合函数结果中返回一行。</li>
<li><p>优化器会在索引存在的情况下，通过符合 RANGE 范围的条数和总数的比例来选择是使用索引还是进行全表遍历,这是为了避免过多的 random disk.  </p>
<p>  — 不使用索引(customer_id)<br>  EXPLAIN SELECT <em> FROM rental WHERE customer_id&lt;103;<br>  — 使用索引<br>  EXPLAIN SELECT </em> FROM rental WHERE customer_id&lt;102;<br>  — 其中 id &lt; 103 的行数为 2767, id &lt; 102 的行数为 2734</p>
</li>
<li><p>“Using Index; Using where” it means that first the index is used to retrieve the records (an actual access to the table is not needed) and then on top of this result set the filtering of the where clause is done. For example: SELECT id FROM test WHERE id &gt; 5;</p>
</li>
<li>“Using index condition” 的理解是, 首先 mysql server 和 storage engine 是两个组件, server 负责 sql的parse, 执行; storage engine 去真正的 做 数据/index的 读取/写入. 以前是这样: server 命令 storage engine 按 index 把相应的 数据 从 数据表读出, 传给server, server来按 where条件 做选择; 现在 ICP则是在 可能的情况下, 让storage engine 根据index 做判断, 如果不符合 条件 则无须 读 数据表. 这样 节省了disk IO. <a href="https://dev.mysql.com/doc/refman/5.6/en/index-condition-pushdown-optimization.html" target="_blank" rel="noopener">Link</a></li>
</ul>
</li>
</ol>
<h4 id="MySQL数据类型选择">MySQL数据类型选择</h4><h5 id="varchar和text">varchar和text</h5><ol>
<li><p>当超过255的长度之后，使用varchar和text没有本质区别，text没有默认值；推荐使用varchar（10000），毕竟这个还有截断，可以保证字段的最大值可控，如果使用text那么如果code有漏洞很有可能就写入数据库一个很大的内容，会造成风险；</p>
</li>
<li><p>当varchar大于某些数值的时候，其会自动转换为text，大概规则如下：</p>
<ul>
<li>大于varchar（255）变为 tinytext</li>
<li>大于varchar（500）变为 text</li>
<li>大于varchar（20000）变为 mediumtext  </li>
</ul>
</li>
<li><p>char的上限为255字节，varchar的上限65535字节，text的上限为65535。char在存储的时候会截断尾部的空格，varchar和text不会。<a href="http://www.cnblogs.com/billyxp/p/3548540.html" target="_blank" rel="noopener">MySQL之char、varchar和text的设计</a></p>
</li>
</ol>
<h4 id="参考链接">参考链接</h4><ol>
<li><a href="http://blog.csdn.net/gevolution90/article/details/6856922" target="_blank" rel="noopener">Mysql explain结果解读</a></li>
</ol>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="../../tags/数据库/"> <i class="fa fa-tag"></i> 数据库 </a>
          
            <a href="../../tags/MySQL/"> <i class="fa fa-tag"></i> MySQL </a>
          
        </div>
      

      

      
      
    </div>
  </div>


    
  </div>

  
  <div class="pagination">
    <a class="extend prev" rel="prev" href="../7/">&laquo;</a><a class="page-number" href="../../">1</a><span class="space">&hellip;</span><a class="page-number" href="../7/">7</a><span class="page-number current">8</span><a class="page-number" href="../9/">9</a><span class="space">&hellip;</span><a class="page-number" href="../17/">17</a><a class="extend next" rel="next" href="../9/">&raquo;</a>
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview">
        <div class="site-author motion-element">
          <img class="site-author-image" src="/images/avatar.jpg" alt="CharlesXiao">
          <p class="site-author-name">CharlesXiao</p>
        </div>
        <p class="site-description motion-element">在码农炼成之路不断挣扎……stay hungry……keep learning……</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="../../archives">
              <span class="site-state-item-count">84</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="../../categories">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="../../tags">
              <span class="site-state-item-count">76</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </div>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/Charles-Xiao" target="_blank">github</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/2262300105/profile?topnav=1&wvr=6" target="_blank">weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://daijiale.github.io/" target="_blank">Daijiale的个人站点</a>
            </span>
            
          
        </div>

        
        

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp;  2015.05.16 - 
  2018
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">CharlesXiao</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="../../vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
  <script type="text/javascript" src="../../vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('.content img').each(function () {
        var $image = $(this);
        var $imageWrapLink = $image.parent('a');

        if ($imageWrapLink.size() < 1) {
          $imageWrapLink = $image.wrap('<a href="' + this.getAttribute('src') + '"></a>').parent('a');
        }
        $imageWrapLink.addClass('fancybox');
      });
    });
    $('.fancybox').fancybox({
      helpers: {
        overlay: {
          locked: false
        }
      }
    });
  </script>


  <script type="text/javascript">
  function hasMobileUA () {
    var nav = window.navigator;
    var ua = nav.userAgent;
    var pa = /iPad|iPhone|Android|Opera Mini|BlackBerry|webOS|UCWEB|Blazer|PSP|IEMobile|Symbian/g;

    return pa.test(ua);
  }

  function isDesktop () {
    return screen.width > 991 && !hasMobileUA();
  }

  function isTablet () {
    return screen.width < 992 && screen.width > 767 && hasMobileUA();
  }

  function isMobile () {
    return screen.width < 767 && hasMobileUA();
  }

  function escapeSelector (selector) {
    return selector.replace(/[!"$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g, "\\$&")
  }
</script>

  

  <script type="text/javascript" src="../../vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="../../vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" id="motion.global">
  $(document).ready(function () {
    var body = $('body');
    var isSidebarVisible = false;
    var sidebarToggle = $('.sidebar-toggle');
    var sidebarToggleLine1st = $('.sidebar-toggle-line-first')
    var sidebarToggleLine2nd = $('.sidebar-toggle-line-middle');
    var sidebarToggleLine3rd = $('.sidebar-toggle-line-last');
    var sidebar = $('.sidebar');

    var SIDEBAR_WIDTH = '320px';
    var SIDEBAR_DISPLAY_DURATION = 300;

    var sidebarToogleLineStatusInit = {width: '100%', opacity: 1, left: 0, rotateZ: 0, top: 0};

    var sidebarToggleLine1stStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine1stStatusArrow = {width: '50%', rotateZ: '-45deg', top: '2px'};
    var sidebarToogleLine1stStatusClose = {width: '100%', rotateZ: '-45deg', top: '5px'};

    var sidebarToggleLine2ndStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine2ndStatusArrow = {width: '90%'};
    var sidebarToogleLine2ndStatusClose = {opacity: 0};

    var sidebarToggleLine3rdStatusInit = sidebarToogleLineStatusInit;
    var sidebarToggleLine3rdStatusArrow = {width: '50%', rotateZ: '45deg', top: '-2px'};
    var sidebarToogleLine3rdStatusClose = {width: '100%', rotateZ: '45deg', top: '-5px'};

    LogoAndMenuMotion();
    sidebatToggleMotion();
    postsListMotion();
    backToTopMotion();


    $(document)
      .on('sidebar.isShowing', function () {
        isDesktop() && body.velocity(
          {paddingRight: SIDEBAR_WIDTH},
          SIDEBAR_DISPLAY_DURATION
        );
        sidebarContentMotion();
      })
      .on('sidebar.isHiding', function () {});

    function LogoAndMenuMotion() {
      $.Velocity.RunSequence([
        { e: $('.brand'), p: { opacity: 1 }, o: { duration: 100 } },
        { e: $('.logo'), p: { opacity: 1, top: 0 }, o: { duration: 50} },
        
        { e: $('.logo-line-before i'), p: { translateX: "100%" }, o: { duration: 500, sequenceQueue: false } },
        { e: $('.logo-line-after i'), p: { translateX: "-100%" }, o: { duration: 500, sequenceQueue: false } },
        
        { e: $('.site-title'), p: { opacity: 1, top: 0 }, o: { duration: 200 } }
      ]);
      $('.menu-item').velocity('transition.slideDownIn', {display: null});
    }


    function backToTopMotion () {
      var b2top = $('.back-to-top');
      b2top.on('click', function () {
        body.velocity('scroll');
      });
    }

    function sidebarShowMotion () {

      sidebarToggleLine1st.velocity(sidebarToogleLine1stStatusClose);
      sidebarToggleLine2nd.velocity(sidebarToogleLine2ndStatusClose);
      sidebarToggleLine3rd.velocity(sidebarToogleLine3rdStatusClose);

      sidebar.velocity({width: SIDEBAR_WIDTH}, {
        display: 'block',
        duration: SIDEBAR_DISPLAY_DURATION,
        complete: function () {
          sidebar.addClass('sidebar-active');
          sidebar.trigger('sidebar.didShow');
        }
      });
      sidebar.trigger('sidebar.isShowing');
    }

    function sidebarHideMotion () {
      isDesktop() && body.velocity({paddingRight: 0});
      sidebar.velocity('reverse');

      sidebarToggleLine1st.velocity(sidebarToggleLine1stStatusInit);
      sidebarToggleLine2nd.velocity(sidebarToggleLine2ndStatusInit);
      sidebarToggleLine3rd.velocity(sidebarToggleLine3rdStatusInit);

      sidebar.removeClass('sidebar-active');
      sidebar.trigger('sidebar.isHiding');
    };

    function sidebarContentMotion () {
      $('.sidebar .motion-element').velocity(
        'transition.slideRightIn',
        {stagger: 50, drag: true}
      );
    }

    function postsListMotion () {
      var postMotionOptions = window.postMotionOptions || {stagger: 300, drag: true};
      $('.post').velocity('transition.slideDownIn', postMotionOptions);
    }

    function sidebatToggleMotion () {
      sidebarToggle.on('click', function () {
        isSidebarVisible ? sidebarHideMotion() : sidebarShowMotion();
        isSidebarVisible = !isSidebarVisible;
      });

      sidebarToggle.hover(function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusArrow);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusArrow);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusArrow);
      }, function () {
        if (isSidebarVisible) {return}
        sidebarToggleLine1st.velocity('stop').velocity(sidebarToggleLine1stStatusInit);
        sidebarToggleLine2nd.velocity('stop').velocity(sidebarToggleLine2ndStatusInit);
        sidebarToggleLine3rd.velocity('stop').velocity(sidebarToggleLine3rdStatusInit);
      });
    }
  });

</script>





  

  
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  
  
  


  

  
</body>
</html>
